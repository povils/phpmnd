# TravisCI configuration for povils/phpmnd

language: php
os:
  - linux
dist: bionic

cache:
  directories:
    - "${HOME}/.composer/cache"

git:
  depth: 1

jobs:
  fast_finish: true
  include:
    - php: 7.1
      env: COMPOSER_FLAGS=""

    - php: 7.2
      env: COMPOSER_FLAGS=""

    - php: 7.2
      env: COMPOSER_FLAGS="--prefer-lowest"

    - php: 7.3
      env: COMPOSER_FLAGS=""

    - php: 7.3
      env: COMPOSER_FLAGS="--prefer-lowest"

    - php: 7.4
      env: COMPOSER_FLAGS=""

# Function ReflectionType::__toString() is deprecated
#    - php: 7.4
#      env: COMPOSER_FLAGS="--prefer-lowest"

    - name: "Coding standard compliance"
      php: 7.4
      env: COMPOSER_FLAGS=""
      script: composer run-script cs-check

install:
  - composer update -n ${COMPOSER_FLAGS}

script:
  - composer run-script test

notifications:
  email: false
